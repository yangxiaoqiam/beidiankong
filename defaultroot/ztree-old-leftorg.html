<html xmlns="http://www.w3.org/1999/xhtml"><head>  
<title>组织管理</title>  
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">  
<script type="text/javascript">
  var whirRootPath = "/defaultroot";
  var preUrl = "/defaultroot"; 
  var whir_browser = "chrome"; 
  var whir_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"; 
  var whir_locale = "zh_cn"; 
</script>
<script src="scripts/jquery-1.12.4.min.js" type="text/javascript"></script>
<script src="scripts/jquery-migrate-1.4.1.js" type="text/javascript"></script>
<script src="scripts/i18n/zh_CN/CommonResource.js" type="text/javascript"></script>
<link href="themes/common/common.css" rel="stylesheet" type="text/css">
<link href="themes/2015/color_cyan/style.css" rel="stylesheet" type="text/css">
<script src="scripts/plugins/lhgdialog/lhgdialog.js?skin=idialog" type="text/javascript"></script>

<script src="scripts/plugins/form/jquery.form.js" type="text/javascript"></script>
<script src="scripts/main/whir.validation.js" type="text/javascript"></script>
<script src="scripts/main/whir.application.js" type="text/javascript"></script>
<script src="scripts/main/whir.application_new.js" type="text/javascript"></script> 
<script src="scripts/main/whir.util.js" type="text/javascript"></script>
  
<script src="scripts/plugins/My97DatePicker/WdatePicker.js"></script>
<link href="scripts/plugins/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">

  
<script src="scripts/plugins/powerFloat/jquery-powerFloat.js" type="text/javascript"></script>
<link href="scripts/plugins/powerFloat/powerFloat.css" rel="stylesheet" type="text/css">

  
<link href="scripts/plugins/easyui/1.3.2/themes/default/easyui.css" rel="stylesheet" type="text/css">
<link href="scripts/plugins/easyui/1.3.2/themes/icon.css" rel="stylesheet" type="text/css">
<script src="scripts/plugins/easyui/1.3.2/jquery.easyui.min.js" type="text/javascript"></script>


<script type="text/javascript">
/********公共初始化操作**********************/
$(document).ready(function(){ 
    setInputStyle();
    digitCheck();
    $("input[type='hidden'],select").each(function(){
        $(this).attr("defaultValue",$(this).val());
    });
    try{$(document.body).focus();}catch(e){}
});
</script>
  
<script src="scripts/plugins/jPages/js/jPages.js" type="text/javascript"></script>
<!--<link   href="scripts/plugins/jPages/css/jPages.css" rel="stylesheet" type="text/css"/>-->

<link href="themes/common/common-16px.css" rel="stylesheet" type="text/css">
  
<!--这里可以追加导入模块内私有的js文件或css文件-->
    <link href="scripts/plugins/zTree/css/2012/zTreeStyle.css" rel="stylesheet" type="text/css">
    <!--link   href="scripts/plugins/zTree/css/2012/iconSkin.css" rel="stylesheet" type="text/css"/-->
    <script src="scripts/plugins/zTree/js/jquery.ztree.core-3.5.min.js" type="text/javascript"></script>
    <script src="scripts/plugins/zTree/js/jquery.ztree.excheck-3.5.min.js" type="text/javascript"></script>
<link href="scripts/plugins/zTree/css/zTreeStyle/zTreeStyle.css" rel="stylesheet" type="text/css">
 
<script language="JavaScript">

function changeBdColor(obj, bgColor, color){
    $(obj).css('background-color',bgColor).css('color',color);
}
//-->
</script>
<style type="text/css">
div#rMenu {position:absolute; visibility:hidden; top:0; background-color: #80AFD7;text-align: left; width:100px; border-left:1px solid #80AFD7; border-right:1px solid #666666; border-top:1px solid #80AFD7; border-bottom:1px solid #666666; z-index: 100}
div#rMenu ul{list-style:none; margin:2px; padding:0px;}
div#rMenu ul li{
    margin: 0px ;
    cursor: pointer;
    display:inline;
    float:left;
    width:96%; 
    border-bottom:1px solid #ddd;
    padding:3px;
}
</style>
<link rel="stylesheet" type="text/css" media="screen" href="http://192.168.0.246:7230themes/common/style_chrome.css"><style>.jp-invisible { visibility: hidden !important; } .jp-hidden { display: none !important; }</style><style>.jp-invisible { visibility: hidden !important; } .jp-hidden { display: none !important; }</style></head>  

<body class="MainFrameBox" marginwidth="0" marginheight="0">  
<table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody><tr>
        <td valign="top" style="padding-right:5px;">
            <div id="orgTree" style="width: 250px; height: 1611px; overflow: auto; border: 1px solid rgb(231, 231, 231);">
                <ul id="treeOrg" class="ztree"><li id="treeOrg_1" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_1_switch" title="" class="button level0 switch roots_close" treenode_switch=""></span><a id="treeOrg_1_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="集团"><span id="treeOrg_1_ico" title="" treenode_ico="" class="button fa fa_ico_close" style="width:0px;height:0px;"></span><span id="treeOrg_1_span">集团</span></a></li><li id="treeOrg_2" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_2_switch" title="" class="button level0 switch center_docu" treenode_switch=""></span><a id="treeOrg_2_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="测试组织插入"><span id="treeOrg_2_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_2_span">测试组织插入</span></a></li><li id="treeOrg_3" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_3_switch" title="" class="button level0 switch center_docu" treenode_switch=""></span><a id="treeOrg_3_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="测试"><span id="treeOrg_3_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_3_span">测试</span></a></li><li id="treeOrg_4" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_4_switch" title="" class="button level0 switch center_docu" treenode_switch=""></span><a id="treeOrg_4_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="wxw测试组织"><span id="treeOrg_4_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_4_span">wxw测试组织</span></a></li><li id="treeOrg_5" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_5_switch" title="" class="button level0 switch center_docu" treenode_switch=""></span><a id="treeOrg_5_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="企业微信组织1"><span id="treeOrg_5_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_5_span">企业微信组织1</span></a></li><li id="treeOrg_6" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_6_switch" title="" class="button level0 switch center_docu" treenode_switch=""></span><a id="treeOrg_6_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="万户网络 1"><span id="treeOrg_6_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_6_span">万户网络 1</span></a></li><li id="treeOrg_7" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_7_switch" title="" class="button level0 switch center_docu" treenode_switch=""></span><a id="treeOrg_7_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="组织接口1"><span id="treeOrg_7_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_7_span">组织接口1</span></a></li><li id="treeOrg_8" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_8_switch" title="" class="button level0 switch center_docu" treenode_switch=""></span><a id="treeOrg_8_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="万户网络11"><span id="treeOrg_8_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_8_span">万户网络11</span></a></li><li id="treeOrg_9" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_9_switch" title="" class="button level0 switch center_docu" treenode_switch=""></span><a id="treeOrg_9_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="一二三四五六七"><span id="treeOrg_9_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_9_span">一二三四五六七</span></a></li><li id="treeOrg_10" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_10_switch" title="" class="button level0 switch center_docu" treenode_switch=""></span><a id="treeOrg_10_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="组织1部"><span id="treeOrg_10_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_10_span">组织1部</span></a></li><li id="treeOrg_11" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_11_switch" title="" class="button level0 switch center_close" treenode_switch=""></span><a id="treeOrg_11_a" class="level0 curSelectedNode" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="增量组织001"><span id="treeOrg_11_ico" title="" treenode_ico="" class="button fa fa_ico_close" style="width:0px;height:0px;"></span><span id="treeOrg_11_span">增量组织001</span></a></li><li id="treeOrg_12" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_12_switch" title="" class="button level0 switch center_close" treenode_switch=""></span><a id="treeOrg_12_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="A增量组织00A"><span id="treeOrg_12_ico" title="" treenode_ico="" class="button fa fa_ico_close" style="width:0px;height:0px;"></span><span id="treeOrg_12_span">A增量组织00A</span></a></li><li id="treeOrg_13" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_13_switch" title="" class="button level0 switch center_close" treenode_switch=""></span><a id="treeOrg_13_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="云测试组织"><span id="treeOrg_13_ico" title="" treenode_ico="" class="button fa fa_ico_close" style="width:0px;height:0px;"></span><span id="treeOrg_13_span">云测试组织</span></a></li><li id="treeOrg_14" class="level0" tabindex="0" hidefocus="true" treenode=""><span id="treeOrg_14_switch" title="" class="button level0 switch bottom_docu" treenode_switch=""></span><a id="treeOrg_14_a" class="level0" treenode_a="" onclick="" target="_blank" style="color:#0055ad;" title="ezwgl"><span id="treeOrg_14_ico" title="" treenode_ico="" class="button fa fa_ico_docu" style="width:0px;height:0px;"></span><span id="treeOrg_14_span">ezwgl</span></a></li></ul>
                <script type="text/javascript">
                        <!--
                        var settingOrg = {
                            view: {
                                showIcon: false,
                                dblClickExpand: false,
                                fontCss : {color:"#0055ad"}
                            },
                            async: {
                                enable: true,
                                url:"Organization!orgTree.action",
                                autoParam:["orgParentOrgId"],
                                otherParam:{"range":"*0*"}
                            },
                            callback: {
                                onExpand: onExpandOrg,
                                onRightClick: OnRightClick,
                                onClick: zTreeOnClick
                              //  onAsyncSuccess: zTreeOnAsyncSuccess
                            }
                        };
                       
                        
                      /*  function zTreeOnAsyncSuccess(event, treeId, treeNode, msg) {
                 var treeObj = $.fn.zTree.getZTreeObj("treeOrg");
              var orgId = document.getElementById("orgId").value;
              var node = treeObj.getNodeByParam("id",orgId,null);
              //alert(node);
              treeObj.selectNode(node);
              };
            */
            function zTreeOnClick(event, treeId, treeNode) {
                //getOrgList(treeNode.id);
                //传递参数orgId用于后台查询
                //alert(treeNode.id);
                document.getElementById("orgId").value=treeNode.id;
                document.getElementById("init").value="notfirst";
                
                refreshListForm('queryForm');
                  //alert(treeNode.tId + ", " + treeNode.id);
            };
            
                        function onExpandOrg(event, treeId, treeNode) {
                            if(treeNode.children.length==0){
                                treeNode.isParent = false;
                                zTree.updateNode(treeNode);
                            }
                        };
                        //-----xiehd--20151112--点击组织树，刷新右侧组织列表---开始
                        /*function getOrgList(id){
                          $.ajax({
                url: "Organization!orgListByOrgID.action?init=notfirst&startPage=1&orgId="+id+"&range=*0*",
                cache: false,
                async: false,
                success: function(dataForm) {
                
                alert(dataForm);
                
                }
              });
                        };
                       */
            //-----xiehd--20151112--点击组织树，刷新右侧组织列表---结束
                        function OnRightClick(event, treeId, treeNode) {
                            var eventX_ = event.clientX + 10;
                            var eventY_ = event.clientY;
                            var offset_ = eventY_ + $(document).scrollTop();
                            
                            if($(window).outerHeight() - eventY_ < $("#rMenu").outerHeight()){
                                offset_ = offset_ - $("#rMenu")._outerHeight();
                            }

                            if (!treeNode && event.target.tagName.toLowerCase() != "button" && $(event.target).parents("a").length == 0) {
                                zTree.cancelSelectedNode();
                                showRMenu("root", eventX_, offset_);
                            } else if (treeNode && !treeNode.noR) {
                                zTree.selectNode(treeNode);
                                showRMenu("node", eventX_, offset_);
                            }
                        }

                        function showRMenu(type, x, y) {
                            $("#rMenu ul").show();
                            if (type=="root") {
                                $("#m_modify").hide();
                                $("#m_del").hide();
                                $("#m_addSub").hide();
                                
                                $("#m_add").show();
                                rMenu.css({"top":y+"px", "left":x+"px", "visibility":"visible"});
                                
                            } else {
                                $("#m_modify").show();
                                $("#m_del").show();
                                $("#m_addSub").show();
                                $("#m_add").hide();

                                rMenu.css({"top":y+"px", "left":x+"px", "visibility":"visible"});
                            }
                            
                            //rMenu.css({"top":y+"px", "left":x+"px", "visibility":"visible"});

                            $("body").bind("mousedown", onBodyMouseDown);
                        }

                        function hideRMenu() {
                            if (rMenu) rMenu.css({"visibility": "hidden"});
                            $("body").unbind("mousedown", onBodyMouseDown);
                        }

                        function onBodyMouseDown(event){
                            if (!(event.target.id == "rMenu" || $(event.target).parents("#rMenu").length>0)) {
                                rMenu.css({"visibility" : "hidden"});
                            }
                        }

                        var addCount = 1;
                        function addTreeNode() {
                            hideRMenu();
                            var newNode = { name:"增加" + (addCount++)};
                            if (zTree.getSelectedNodes()[0]) {
                                newNode.checked = zTree.getSelectedNodes()[0].checked;
                                zTree.addNodes(zTree.getSelectedNodes()[0], newNode);
                            } else {
                                zTree.addNodes(null, newNode);
                            }
                        }

                        function removeTreeNode() {
                            hideRMenu();
                            var nodes = zTree.getSelectedNodes();
                            if (nodes && nodes.length>0) {
                                if (nodes[0].children && nodes[0].children.length > 0) {
                                    var msg = "要删除的节点是父节点，如果删除将连同子节点一起删掉。\n\n请确认！";
                                    if (confirm(msg)==true){
                                        zTree.removeNode(nodes[0]);
                                    }
                                } else {
                                    zTree.removeNode(nodes[0]);
                                }
                            }
                        }

                        function checkTreeNode(checked) {
                            var nodes = zTree.getSelectedNodes();
                            if (nodes && nodes.length>0) {
                                zTree.checkNode(nodes[0], checked, true);
                            }
                            hideRMenu();
                        }

                        function modifyOrg(){
                            hideRMenu();
                            var nodes = zTree.getSelectedNodes();
                            if (nodes && nodes.length>0) {
                                var $this = $(nodes[0]);
                                openWin({url:'Organization!loadOrg.action?range=*0*&orgParentOrgId='+$this.attr('pId')+'&orgId='+$this.attr('id')+'&verifyCode='+$this.attr('verifyCode'),width:800,height:670,winName:'modify',isFull:true});
                            }
                        }

                        function delOrg(){
                            hideRMenu();
                            var nodes = zTree.getSelectedNodes();
                            if (nodes && nodes.length>0) {
                                //$(nodes[0]).attr('isParent')
                                var msg = "该组织及单位主页、下属组织、组织下的用户将全部被删除，确定要删除吗？";
                                whir_confirm(msg, function(){
                                    var $this = $(nodes[0]);
                                    var json = ajaxForSync('Organization!deleteOrg.action', 'orgId='+$this.attr('id')+'&verifyCode='+$this.attr('verifyCode'));
                                    json = eval("("+json+")");
                                    if(json.result == 'success'){
                                        zTree.removeNode(nodes[0]);
                                    }                                    
                                },
                                function(){
                                });
                                /*if (confirm(msg)){
                                    zTree.removeNode(nodes[0]);
                                }*/
                            }
                        }

                        function addSubOrg(){
                            hideRMenu();
                            var nodes = zTree.getSelectedNodes();
                            if (nodes && nodes.length>0) {
                                var $this = $(nodes[0]);
                                openWin({url:'Organization!addOrg.action?range=*0*&orgParentOrgId='+$this.attr('id')+'&orgId='+$this.attr('id'),width:800,height:670,winName:'add',isFull:true});
                            }
                        }

                        function addOrg(flag){
                            var params = '';
                            if(flag){
                                hideRMenu();
                            }else{
                                params = '&addType=1';
                            }
                            openWin({url:'Organization!addOrg.action?range=*0*&orgParentOrgId=0&orgId=0'+params,width:820,height:670,winName:'add',isFull:true});
                        }

                        //增加组织节点
                        function addTreeOrg(json, flag){
                            if(flag){
                                var newNode = {id:json.data.orgId, pId:json.data.orgParentOrgId, name:json.data.orgName, orgParentOrgId:json.data.orgId, verifyCode:json.data.verifyCode};
                                var nodes = zTree.getSelectedNodes();
                                if (nodes.length>0) {                                    
                                    zTree.addNodes(nodes[0], newNode);
                                    if(nodes[0].children.length==0){
                                        nodes[0].isParent = true;
                                        zTree.updateNode(nodes[0]);
                                    }
                                } else {
                                    zTree.addNodes(null, newNode);
                                }
                            }else{
                                refreshTreeOrg(null);
                            }
                        }
                        //更新组织节点
                        function updateTreeOrg(json, flag){
                            if(flag){
                                var nodes = zTree.getSelectedNodes();
                                if (nodes.length>0) {
                                    var pId = nodes[0].pId;
                                    var orgParentOrgId = json.data.orgParentOrgId;
                                    if(pId == orgParentOrgId){
                                        nodes[0].name = json.data.orgName;
                                        nodes[0].pId = orgParentOrgId;
                                        zTree.updateNode(nodes[0]);
                                    }else{
                                        refreshTreeOrg(null);
                                    }
                                }
                            }else{
                                refreshTreeOrg(null);
                            }
                        }

                        function refreshTreeOrg(json){
                            $.fn.zTree.init($("#treeOrg"), settingOrg);
                            if(json){
                                //refreshListForm('queryForm');
                            }
                        }

                        function resizeOrgTreeHeight(){
                            $('#orgTree').height($(document).height()-3);
                        }
            
              
            
                        var zTree, rMenu;
                        $(document).ready(function(){
                            refreshTreeOrg(null);
                            zTree = $.fn.zTree.getZTreeObj("treeOrg");
                      rMenu = $("#rMenu");
                            
                            $(window).resize(function(){
                                resizeOrgTreeHeight();
                            });
                            resizeOrgTreeHeight();
                            
                        });
                        //-->
                    </script>
            </div>
            <div id="rMenu" style="top: 296px; left: 70px; visibility: visible;">
                <ul>
                    <li id="m_modify" onclick="modifyOrg();" style="border-bottom: 0px; display: block;" onmouseover="changeBdColor(this, '#993300', '#CCFF00');" onmouseout="changeBdColor(this, '', '#000000');">修改组织</li>
                    <li id="m_del" onclick="delOrg();" onmouseover="changeBdColor(this, '#993300', '#CCFF00');" onmouseout="changeBdColor(this, '', '#000000');" style="display: block; color: rgb(0, 0, 0);">删除组织</li>
                    <li id="m_addSub" onclick="addSubOrg();" style="border-bottom: 0px; display: block; color: rgb(0, 0, 0);" onmouseover="changeBdColor(this, '#993300', '#CCFF00');" onmouseout="changeBdColor(this, '', '#000000');">添加子组织</li>
                    <li id="m_add" onclick="addOrg(true);" style="border-bottom: 0px; color: rgb(0, 0, 0); display: none;" onmouseover="changeBdColor(this, '#993300', '#CCFF00');" onmouseout="changeBdColor(this, '', '#000000');">添加一级组织</li>
                </ul>
            </div>
        </td>
        <td width="90%" valign="top">

        <!--这里的表单id queryForm 允许修改 -->  
<form id="queryForm" name="queryForm" action="Organization!orgList.action" method="post">
<!-- SEARCH PART START -->  

<input type="hidden" name="range" value="*0*" id="range" defaultvalue="*0*">
<table width="100%" border="0" cellpadding="0" cellspacing="0" class="SearchBar">
<input type="hidden" name="orgId" id="orgId" value="985" class="inputText" style="width:98%;" whir-options="vtype:['notempty',{'maxLength':20},'spechar3']" maxlength="20" defaultvalue="63">   
<input type="hidden" name="init" id="init" value="notfirst" class="inputText" style="width:98%;" whir-options="vtype:['notempty',{'maxLength':20},'spechar3']" maxlength="20" defaultvalue="first">    
    <tbody><tr>  
        <td class="whir_td_searchtitle">组织名称：</td>  
        <td class="whir_td_searchinput">  
            <input type="text" name="orgName" size="16" value="" id="orgName" class="inputText">  
        </td>  
        <td class="whir_td_searchtitle">组织简称：</td>  
        <td class="whir_td_searchinput">  
            <input type="text" name="orgSimpleName" size="16" value="" id="orgSimpleName" class="inputText">
        </td>  
        <td class="whir_td_searchtitle">组织编码：</td>  
        <td class="whir_td_searchinput">
            <input type="text" name="orgSerial" size="16" value="" id="orgSerial" class="inputText">
        </td>  
    </tr>
    <tr>
        <td colspan="6" class="SearchBar_toolbar">  
            <!-- refreshListForm 是公共方法，queryForm 为上面的表单id-->  
            <input type="button" class="btnButton4font" onclick="refreshListForm('queryForm');" value="立即查找">  
            <!--resetForm(obj)为公共方法-->  
            <input type="button" class="btnButton4font" value="清　除" onclick="resetForm(this);">
        </td>  
    </tr>
</tbody></table>  
<!-- SEARCH PART END -->  
  
<!-- MIDDLE  BUTTONS START -->  
<table width="100%" border="0" cellpadding="0" cellspacing="0" class="toolbarBottomLine">    
    <tbody><tr> 
        <td align="right">
            <input type="button" class="btnButton4font" onclick="addOrg(false);" value="新　增">
        </td>  
    </tr>  
</tbody></table>  
<!-- MIDDLE  BUTTONS END -->  

<!-- LIST TITLE PART START -->      
<table width="100%" border="0" cellpadding="0" cellspacing="1" class="listTable">  
    <!-- thead必须存在且id必须为headerContainer -->  
    <thead id="headerContainer">  
    <tr class="listTableHead">  
        <!--td whir-options="field:'orgId',width:'2%',checkbox:true" ><input type="checkbox" name="items" id="items" onclick="setCheckBoxState('orgId',this.checked);" ></td-->  
        <td whir-options="field:'orgName',width:'17%'" width="17%">组织名称</td>
        <td whir-options="field:'orgNameString',width:'30%'" width="30%">组织全称</td>
        <td whir-options="field:'orgSimpleName',width:'10%'" width="10%">组织简称</td>   
        <td whir-options="field:'orgSerial', width:'10%'" width="10%">组织编码</td>   
        <td whir-options="field:'chargeLeaderNames', width:'10%'" width="10%">分管领导</td>   
        <td whir-options="field:'orgManagerEmpName',width:'10%'" width="10%">部门领导</td>
        <td whir-options="field:'',width:'8%',renderer:renderOperate" width="8%">操作</td>
    </tr>  
    </thead>  
    <!-- tbody必须存在且id必须为itemContainer -->  
    <tbody id="itemContainer"><tr class="listTableLine1"><td>增量组织101</td><td>增量组织001.增量组织101</td><td>ZLZZ101</td><td>ZLZZ101</td><td>&nbsp;</td><td>&nbsp;</td><td class="listTableLineLastTD"><img src="images/modi.gif" title="修改" onclick="javascript:openWin({url:'Organization!loadOrg.action?range=*0*&amp;orgId=986&amp;orgParentOrgId=985&amp;verifyCode=A1A84F42F5orgId00&amp;addType=1',width:820,height:670,winName:'modify',isFull:true});"><img src="images/del.gif" title="删除" onclick="del(986,'A1A84F42F5orgId00');"></td></tr></tbody>  
</table>  
<!-- LIST TITLE PART END -->  

<!-- PAGER START -->  
<table width="100%" border="0" cellpadding="0" cellspacing="0" class="Pagebar">  
    <tbody><tr>  
        <td>  
            


<div class="page clearfix" style="display: block;">
<div id="pager_desc">第&nbsp;<font color="red">1</font>/1&nbsp;页&nbsp;&nbsp;&nbsp;共&nbsp;1&nbsp;条记录&nbsp;</div>
<div id="pagerSize">
<select name="pageSize" id="page_size" onchange="pageClick(1,this);" class="pageSize" defaultvalue="15">

 <option value="15" selected="">15</option>

 <option value="30">30</option>

 <option value="50">50</option>

 <option value="100">100</option>

</select> 
</div>
<div id="pager"><a class="jp-previous jp-disabled" onclick="pageBtnClick(this,'previous');">前页</a><a href="javascript:void(0);" onclick="pageClick($(this).text(),this);" class="jp-current">1</a><span class="jp-hidden"><b>...</b></span><a class="jp-next jp-disabled" onclick="pageBtnClick(this,'next');">后页</a></div>
<div id="pagebtn"><input id="go_start_pager" onfocus="$(this).attr('class','clicked');" onblur="$(this).attr('class','');"><input type="button" onclick="goPager(this);" value=" Go "></div>
</div>

  
        </td>  
    </tr>  
</tbody></table>  
<!-- PAGER END -->  

<input type="hidden" id="orderByFieldName" name="orderByFieldName" value=""><input type="hidden" id="orderByType" name="orderByType" value=""><input type="hidden" id="start_page" name="startPage" defaultvalue="1" value="1"><input type="hidden" id="page_count" name="pageCount" defaultvalue="1" value="1"><input type="hidden" id="recordCount" defaultvalue="0" name="recordCount" value="1"></form>



  

        </td>
    </tr>
</tbody></table>
  

<script type="text/javascript">  
//*************************************下面的函数属于公共的或半自定义的*************************************************//  

//初始化列表页form表单,"queryForm"是表单id，可修改。  
$(document).ready(function(){
     
                        
        
    initListFormToAjax({formId:"queryForm"});         
});

//自定义操作栏内容  
function renderOperate(po,i){  
    var html = '<img src="images/modi.gif" title="修改" onClick="javascript:openWin({url:\'Organization!loadOrg.action?range=*0*&orgId='+po.orgId+'&orgParentOrgId='+po.orgParentOrgId+'&verifyCode='+po.verifyCode+'&addType=1\',width:820,height:670,winName:\'modify\',isFull:true});"><img src="images/del.gif" title="删除" onClick="del('+po.orgId+',\''+po.verifyCode+'\');">';
    return html;  
}

//自定义查看栏内容

function del(orgId, verifyCode){
    var msg = "该组织及单位主页、下属组织、组织下的用户将全部被删除，确定要删除吗？";
    whir_confirm(msg, function(){
        ajaxOperate({urlWithData:'Organization!deleteOrg.action?orgId='+orgId+'&verifyCode='+verifyCode,tip:'删除',isconfirm:false,formId:'queryForm',callbackfunction:refreshTreeOrg});
    },
    function(){
    });
}
//*************************************下面的函数属于各个模块 完全 自定义的*************************************************//  

</script>
 

<style type="text/css">
.ztree li span.button.root_open{background-position:center 8px;}
.ztree li span.button.root_close{background-position:center 8px;}
.ztree li span.button.roots_open{background-position:center 8px;}
.ztree li span.button.roots_close{background-position:center 8px;}
.ztree li span.button.bottom_open{background-position:center 8px;}
.ztree li span.button.bottom_close{background-position:center 8px}
.ztree li span.button.center_close{background-position:center 8px}
.ztree li span.button.center_open{background-position:center 8px}
.ztree li span.button.switch{float:left;}
.ztree li a,.ztree li a.curSelectedNode{
height: auto; 
}  
</style>
</body></html>